#
# Archivo de configuracion del servicio de integraci√≥n continua circleci
#

machine:
  timezone: America/Bogota
  services:
    - docker
  python:
    version: 3.4.4

dependencies:
  pre:
    - sudo pip install invoke
    - sudo apt-get install python3.4-venv
#    - cabal install shellcheck
  override:
#    - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
    - docker info
    - docker --version
    - test/server/skel/build.sh test/server/ftp/conf.sh
    - invoke deps

test:
  pre:
    - invoke pre_commit
    - invoke lint
  override:
    - invoke test
    - invoke dist
    - invoke doc
  post:
    - cp build/test/results.* $CIRCLE_TEST_REPORTS
    - cp results.log $CIRCLE_ARTIFACTS
    - cp -r build/coverage $CIRCLE_ARTIFACTS
    - cp -r build/lint $CIRCLE_ARTIFACTS
    - cp -r build/doc $CIRCLE_ARTIFACTS
    - cp -r dist $CIRCLE_ARTIFACTS
