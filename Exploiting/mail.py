#!usr/bin/python
import socket
import sys

if len(sys.argv) !=2:
	print "mail.py <IP>"
	sys.exit(0)

#socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
#Conectar al target
conexion=s.connect((sys.argv[1], 25))
#Recibimos el banner
banner=s.recv(1024)
print banner
#Saludo
s.send('helo hgm.com ' + '\r\n')
result=s.recv(1024)
print result
#Verificamos usuarios
s.send('vrfy root' + '\r\n')
result=s.recv(1024)
print result
# Remitente
s.send('mail from: root@hgmsapprd01' + '\r\n')
result=s.recv(1024)
print result
#destinatario
s.send('rcpt to: root@hgmsapprd01' + '\r\n')
result=s.recv(1024)
print result
#Mensaje
s.send('data' + '\r\n')
result=s.recv(1024)
print result

#Envio
a="Esto es una prueba de envio de mensaje"
s.send(a + '\r\n' + '.' + '\r\n')
result=s.recv(1024)

print result


s.close()

print "Mensaje enviado!!"
